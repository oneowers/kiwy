{"ast":null,"code":"import{useNavigate}from'react-router-dom';import React,{useState,useEffect}from'react';import'react-loading-skeleton/dist/skeleton.css';import Products from'./products.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function classNames(){for(var _len=arguments.length,classes=new Array(_len),_key=0;_key<_len;_key++){classes[_key]=arguments[_key];}return classes.filter(Boolean).join(' ');}function HomePage(_ref){let{category_id}=_ref;const[products,setProducts]=useState(0);useEffect(()=>{const apiUrl=process.env.REACT_APP_API_BASE_URL+'/api/products/?category_id='+category_id;fetch(apiUrl).then(response=>{if(!response.ok){throw new Error('Network response was not ok');}return response.json();}).then(data=>{setProducts(data);}).catch(error=>{console.error('Error fetching product:',error);});},[window.location.search]);const navigate=useNavigate();const handleCategoryClick=categoryId=>{if(categoryId!=null){const category_id=categoryId!=null?categoryId:'';// If categoryId is null, use an empty string\nnavigate(\"/products?data=\".concat(encodeURIComponent(JSON.stringify({category_id}))));}};if(products.length!=0)return/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto max-w-7xl lg:px-4\",children:[console.log({\"lg_isnot_zero\":products.length!=0,\"length\":products.length}),/*#__PURE__*/_jsx(\"div\",{className:\"pt-7 px-4 pb-3 sm:pt-7\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between space-x-4 items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:classNames(\"text-3xl font-medium text-gray-900\",!products.length!=0&&\"animate-pulse bg-gray-200 px-14 py-5 rounded-lg\"),children:products?products[0].category.name:\"\"}),/*#__PURE__*/_jsxs(\"p\",{onClick:()=>handleCategoryClick(products.length!=0?products[0].category.id:null),className:classNames(\"cursor-pointer whitespace-nowrap text-sm font-medium text-indigo-600 hover:text-indigo-500\",!products&&\"px-14 py-5 animate-pulse bg-indigo-500 rounded-lg\"),children:[products?\"View all\":\"\",products?/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\" \\u2192\"}):\"\"]})]})}),/*#__PURE__*/_jsx(Products,{products:products})]});}export default HomePage;","map":{"version":3,"names":["useNavigate","React","useState","useEffect","Products","jsx","_jsx","jsxs","_jsxs","classNames","_len","arguments","length","classes","Array","_key","filter","Boolean","join","HomePage","_ref","category_id","products","setProducts","apiUrl","process","env","REACT_APP_API_BASE_URL","fetch","then","response","ok","Error","json","data","catch","error","console","window","location","search","navigate","handleCategoryClick","categoryId","concat","encodeURIComponent","JSON","stringify","className","children","log","category","name","onClick","id"],"sources":["/Users/muhammadkamolov/Downloads/knox_mkp/kiwy_01/src/pages/productsByCategory.jsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport React, { useState, useEffect} from 'react'\nimport 'react-loading-skeleton/dist/skeleton.css'\nimport Products from './products.jsx'\n\nfunction classNames(...classes) {\n  return classes.filter(Boolean).join(' ')\n  }\n\nfunction HomePage({category_id}) {\n  const [products, setProducts] = useState(0);\n  \n  useEffect(() => {\n    const apiUrl = process.env.REACT_APP_API_BASE_URL + '/api/products/?category_id=' + category_id;\n\n    fetch(apiUrl)\n        .then((response) => {\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            return response.json();\n        })\n        .then((data) => {\n            setProducts(data);\n        })\n        .catch((error) => {\n            console.error('Error fetching product:', error);\n        });\n  }, [window.location.search]);\n\n  const navigate = useNavigate();\n\n\n  const handleCategoryClick = (categoryId) => {\n    if(categoryId != null){\n      const category_id = categoryId != null ? categoryId : ''; // If categoryId is null, use an empty string\n      navigate(`/products?data=${encodeURIComponent(JSON.stringify({ category_id }))}`);\n    }\n};\n\n  if(products.length != 0) return (\n    <div className='mx-auto max-w-7xl lg:px-4'>\n        {console.log({\"lg_isnot_zero\" : products.length != 0, \"length\" : products.length})}\n        <div className=\"pt-7 px-4 pb-3 sm:pt-7\">\n          <div className=\"flex justify-between space-x-4 items-center\">\n            <h2 className={classNames(\"text-3xl font-medium text-gray-900\", !products.length != 0 && \"animate-pulse bg-gray-200 px-14 py-5 rounded-lg\" )}>{products ? products[0].category.name : \"\"}</h2>\n            <p onClick={() => handleCategoryClick(products.length != 0 ? products[0].category.id : null)} \n            className={classNames(\"cursor-pointer whitespace-nowrap text-sm font-medium text-indigo-600 hover:text-indigo-500\", !products && \"px-14 py-5 animate-pulse bg-indigo-500 rounded-lg\" )}>\n              {products ?  \"View all\" : \"\"}\n              {products ? (<span aria-hidden=\"true\"> &rarr;</span>) : \"\"}\n            </p>\n          </div>\n        </div>\n\n          <Products products={products} />\n    </div>\n  );\n}\n\nexport default HomePage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}