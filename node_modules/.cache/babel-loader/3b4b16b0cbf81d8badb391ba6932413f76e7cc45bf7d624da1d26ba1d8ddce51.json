{"ast":null,"code":"import{Menu}from'@headlessui/react';import{UserIcon}from'@heroicons/react/24/outline';import{useState,useEffect}from'react';import Cookies from'js-cookie';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Example(_ref){let{style}=_ref;const[hasCookie,setHasCookie]=useState(false);const[user,setUser]=useState(null);useEffect(()=>{const cookieValue=Cookies.get('user_id');if(cookieValue!==undefined){const apiUrl=\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/user/\")+cookieValue+\"/\";fetch(apiUrl).then(response=>{if(!response.ok)throw new Error('Сетевая ошибка');return response.json();}).then(data=>{setUser(data);setHasCookie(true);}).catch(error=>{console.error('!!! Ошибка');});}},[]);// Empty dependency array ensures the effect runs only once on mount\nconst handleLogout=()=>{// Remove the user_id cookie or perform any other logout actions\ndocument.cookie='user_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';// You may also want to redirect the user to the login page or perform additional cleanup\n// Refresh the page\nwindow.location.reload();};return/*#__PURE__*/_jsxs(Menu,{as:\"div\",className:\"relative inline-block text-left\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Menu.Button,{className:\"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-400 hover:bg-gray-50\",children:/*#__PURE__*/_jsx(UserIcon,{className:\"h-6 w-6\",\"aria-hidden\":\"true\"})})}),/*#__PURE__*/_jsx(Menu.Items,{className:\"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\",children:/*#__PURE__*/_jsx(\"div\",{className:\"pb-1\",children:hasCookie?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Menu.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"pt-1 font-semibold bg-gray-100\",children:/*#__PURE__*/_jsx(\"p\",{className:\"block px-4 py-2 text-sm\",children:user.user_profile.username})})}),/*#__PURE__*/_jsx(Menu.Item,{children:_ref2=>{let{active}=_ref2;return/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"\".concat(active?'bg-gray-100 text-gray-900':'text-gray-700',\" block px-4\\n                        py-2 text-sm\"),children:\"Cart\"});}}),/*#__PURE__*/_jsx(Menu.Item,{children:_ref3=>{let{active}=_ref3;return/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"\".concat(active?'bg-gray-100 text-gray-900':'text-gray-700',\" block px-4\\n                        py-2 text-sm\"),children:\"Become a Seller\"});}}),/*#__PURE__*/_jsx(Menu.Item,{children:_ref4=>{let{active}=_ref4;return/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"\".concat(active?'bg-gray-100 text-gray-900':'text-gray-700',\" block px-4\\n                        py-2 text-sm\"),onClick:handleLogout,children:\"Log out\"});}})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Menu.Item,{children:_ref5=>{let{active}=_ref5;return/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"\".concat(active?'bg-gray-100 text-gray-900':'text-gray-700',\" block\\n                        px-4 py-2 text-sm\"),children:\"Log In\"});}}),/*#__PURE__*/_jsx(Menu.Item,{children:_ref6=>{let{active}=_ref6;return/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"\".concat(active?'bg-gray-100 text-gray-900':'text-gray-700',\" block\\n                        px-4 py-2 text-sm\"),children:\"Sign In\"});}})]})})})]});}","map":{"version":3,"names":["Menu","UserIcon","useState","useEffect","Cookies","Link","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Example","_ref","style","hasCookie","setHasCookie","user","setUser","cookieValue","get","undefined","apiUrl","concat","process","env","REACT_APP_API_BASE_URL","fetch","then","response","ok","Error","json","data","catch","error","console","handleLogout","document","cookie","window","location","reload","as","className","children","Button","Items","Item","user_profile","username","_ref2","active","href","_ref3","_ref4","onClick","_ref5","to","_ref6"],"sources":["/Users/muhammadkamolov/Downloads/knox_mkp/kiwy_01/src/pages/header/userProfileDropDown.jsx"],"sourcesContent":["import {Menu} from '@headlessui/react'\r\nimport {UserIcon} from '@heroicons/react/24/outline'\r\nimport { useState, useEffect} from 'react'\r\nimport Cookies from 'js-cookie';\r\nimport {Link} from 'react-router-dom'\r\n\r\n\r\n\r\nexport default function Example({style}) {\r\n    const [hasCookie, setHasCookie] = useState(false)\r\n    const [user, setUser] = useState(null);\r\n    \r\nuseEffect(() => {\r\n    const cookieValue = Cookies.get('user_id');\r\n\r\n    if (cookieValue !== undefined) {\r\n\r\n        const apiUrl = `${process.env.REACT_APP_API_BASE_URL}/api/user/` + cookieValue + \"/\";\r\n\r\n        fetch(apiUrl)\r\n            .then((response) => {\r\n                if (!response.ok) throw new Error('Сетевая ошибка');\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                setUser(data);\r\n                setHasCookie(true)\r\n            })\r\n            .catch((error) => {\r\n                console.error('!!! Ошибка');\r\n            });\r\n    }\r\n}, []); // Empty dependency array ensures the effect runs only once on mount\r\n\r\n\r\n\r\nconst handleLogout = () => {\r\n    // Remove the user_id cookie or perform any other logout actions\r\n    document.cookie = 'user_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';\r\n    // You may also want to redirect the user to the login page or perform additional cleanup\r\n\r\n    // Refresh the page\r\n    window.location.reload();\r\n};\r\n\r\nreturn (\r\n\r\n<Menu as=\"div\" className=\"relative inline-block text-left\">\r\n    <div>\r\n        <Menu.Button\r\n            className=\"inline-flex w-full justify-center gap-x-1.5 rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-400 hover:bg-gray-50\">\r\n            <UserIcon className=\"h-6 w-6\" aria-hidden=\"true\" />\r\n        </Menu.Button>\r\n    </div>\r\n\r\n    <Menu.Items\r\n        className=\"absolute right-0 z-10 mt-2 w-56 origin-top-right rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\">\r\n        <div className=\"pb-1\">\r\n            {hasCookie ? (\r\n            <>\r\n                <Menu.Item>\r\n                    <div className=\"pt-1 font-semibold bg-gray-100\">\r\n                        <p className='block px-4 py-2 text-sm'>\r\n                            {user.user_profile.username}\r\n                        </p>\r\n                    </div>\r\n                </Menu.Item>\r\n                <Menu.Item>\r\n                    {({active}) => (\r\n                    <a href=\"#\" className={`${ active ? 'bg-gray-100 text-gray-900' : 'text-gray-700' } block px-4\r\n                        py-2 text-sm`}>\r\n                        Cart\r\n                    </a>\r\n                    )}\r\n                </Menu.Item>\r\n                <Menu.Item>\r\n                    {({active}) => (\r\n                    <a href=\"#\" className={`${ active ? 'bg-gray-100 text-gray-900' : 'text-gray-700' } block px-4\r\n                        py-2 text-sm`}>\r\n                        Become a Seller\r\n                    </a>\r\n                    )}\r\n                </Menu.Item>\r\n                <Menu.Item>\r\n                    {({active}) => (\r\n                    <a href=\"#\" className={`${ active ? 'bg-gray-100 text-gray-900' : 'text-gray-700' } block px-4\r\n                        py-2 text-sm`} onClick={handleLogout}>\r\n                        Log out\r\n                    </a>\r\n                    )}\r\n                </Menu.Item>\r\n            </>\r\n            ) : (\r\n            <>\r\n                <Menu.Item>\r\n                    {({active}) => (\r\n                    <Link to=\"/login\" className={`${ active ? 'bg-gray-100 text-gray-900' : 'text-gray-700' } block\r\n                        px-4 py-2 text-sm`}>\r\n                    Log In\r\n                    </Link>\r\n                    )}\r\n                </Menu.Item>\r\n                <Menu.Item>\r\n                    {({active}) => (\r\n                    <Link to=\"/register\" className={`${ active ? 'bg-gray-100 text-gray-900' : 'text-gray-700' } block\r\n                        px-4 py-2 text-sm`}>\r\n                    Sign In\r\n                    </Link>\r\n                    )}\r\n                </Menu.Item>\r\n            </>\r\n            )}\r\n\r\n        </div>\r\n    </Menu.Items>\r\n</Menu>\r\n)\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}