{"ast":null,"code":"import React,{useState,useEffect}from'react';import{StarIcon}from'@heroicons/react/20/solid';import Skeleton from'react-loading-skeleton';import'react-loading-skeleton/dist/skeleton.css';import{Link}from\"react-router-dom\";import axios from'axios';import Cookies from'js-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function classNames(){for(var _len=arguments.length,classes=new Array(_len),_key=0;_key<_len;_key++){classes[_key]=arguments[_key];}return classes.filter(Boolean).join(' ');}function formatPrice(price){if(price==null)return 0;const priceString=price.toString();const parts=priceString.split('.');const formattedPrice=parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g,' ');if(parts[1]){return\"\".concat(formattedPrice,\".\").concat(parts[1]);}else{return formattedPrice;}}const ProductList=_ref=>{let{}=_ref;const[coins,setCoins]=useState(0);const[products,setProducts]=useState(null);const[loading,setLoading]=useState(true);useEffect(()=>{const apiUrl=\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/products\");fetch(apiUrl).then(response=>{if(!response.ok){throw new Error(\"Network response was not ok\");}return response.json();}).then(data=>{setProducts(data);setLoading(false);}).catch(error=>{console.error(\"Error fetching product:\",error);});},[]);const handleAddToCart=async product_id=>{const user_id=Cookies.get('user_id');if(user_id!==undefined){try{const response=await axios.post(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/api/user/\").concat(user_id,\"/cartitems/\"),{quantity:1,product:{id:product_id}});// Обработка успешного добавления в корзину\nconsole.log('Product added to cart:',response.data);}catch(error){// Обработка ошибок\nconsole.error('Error adding product to cart:',error);}}};const myArray=[1,2,3,4];return/*#__PURE__*/_jsx(\"div\",{className:\"bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto max-w-7xl overflow-hidden sm:px-6 lg:px-0\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"sr-only\",children:\"Products\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"-mx-px grid grid-cols-2 sm:mx-0 md:grid-cols-3 lg:grid-cols-4\",children:myArray.map(()=>/*#__PURE__*/_jsx(\"div\",{className:\"aspect-h-1 m-3 aspect-w-1 overflow-hidden rounded-lg bg-gray-200 group-hover:opacity-90\",children:/*#__PURE__*/_jsx(Skeleton,{className:\"h-80 w-52\"})}))}):/*#__PURE__*/_jsx(\"div\",{className:\"-mx-px grid grid-cols-2 sm:mx-0 md:grid-cols-3 lg:grid-cols-4\",children:products.results.map(product=>product.is_published?/*#__PURE__*/_jsxs(\"div\",{className:\"group p-1 sm:p-2 fade-in\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"aspect-h-1 aspect-w-1 overflow-hidden rounded-lg bg-gray-200\\r \",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\"+product.id,children:/*#__PURE__*/_jsx(\"img\",{src:product.image,alt:product.image,className:\"w-full h-90 object-cover bg-center\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pb-4 pt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-base text-gray-900\",children:/*#__PURE__*/_jsxs(Link,{to:\"/product/\"+product.id,children:[product.name,/*#__PURE__*/_jsx(\"span\",{className:\"placeholder col-6\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-2\",children:[/*#__PURE__*/_jsx(StarIcon,{className:'text-yellow-400 h-4 w-4 flex-shrink-0',\"aria-hidden\":\"true\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"ml-1 text-sm text-gray-500\",children:[product.rating,\" out of 5 stars\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center justify-between\",children:[/*#__PURE__*/_jsx(\"div\",{children:product.discount_price!=0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"del\",{className:\"mt-1 text-sm text-gray-400 \",children:[formatPrice(product.price),\"\\u0441\\u0443\\u043C\"]}),/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg text-lg font-bold text-gray-700 \",children:[formatPrice(product.discount_price),\" \\u0441\\u0443\\u043C\"]})]}):/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg text-lg font-bold text-gray-700 \",children:[formatPrice(product.price),\" \\u0441\\u0443\\u043C\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-4 flex-shrink-0\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddToCart(product.id),className:\"right-0 bottom-0 w-10 h-10 flex items-center justify-center rounded-full border border-gray-200 text-gray-900 hover:bg-gray-100\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-shopping-cart text-gray-600\",\"aria-hidden\":\"true\"})})})]})})]})]},product.id):/*#__PURE__*/_jsx(\"div\",{className:\"aspect-h-1 m-2 aspect-w-1 overflow-hidden rounded-lg bg-gray-200 group-hover:opacity-90\",children:/*#__PURE__*/_jsx(Skeleton,{className:\"h-80 w-52\"})}))})]})});};export default ProductList;","map":{"version":3,"names":["React","useState","useEffect","StarIcon","Skeleton","Link","axios","Cookies","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","classNames","_len","arguments","length","classes","Array","_key","filter","Boolean","join","formatPrice","price","priceString","toString","parts","split","formattedPrice","replace","concat","ProductList","_ref","coins","setCoins","products","setProducts","loading","setLoading","apiUrl","process","env","REACT_APP_API_BASE_URL","fetch","then","response","ok","Error","json","data","catch","error","console","handleAddToCart","product_id","user_id","get","undefined","post","quantity","product","id","log","myArray","className","children","map","results","is_published","to","src","image","alt","name","rating","discount_price","onClick"],"sources":["/Users/muhammadkamolov/Downloads/knox_mkp/kiwy_01/src/components/ecommerce/components/product-lists/with_border_grid.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {StarIcon} from '@heroicons/react/20/solid';\r\nimport Skeleton from 'react-loading-skeleton'\r\nimport 'react-loading-skeleton/dist/skeleton.css'\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nfunction classNames(...classes) {\r\n    return classes.filter(Boolean).join(' ');\r\n}\r\n\r\nfunction formatPrice(price) {\r\n    if (price == null) return 0\r\n    const priceString = price.toString();\r\n    const parts = priceString.split('.');\r\n    const formattedPrice = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ' ');\r\n    if (parts[1]) {\r\n        return `${formattedPrice}.${parts[1]}`;\r\n    } else {\r\n        return formattedPrice;\r\n    }\r\n}\r\n\r\nconst ProductList = ({}) => {\r\n    const [coins, setCoins] = useState(0);\r\n    const [products, setProducts] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const apiUrl = `${process.env.REACT_APP_API_BASE_URL}/api/products`;\r\n\r\n        fetch(apiUrl)\r\n            .then((response) => {\r\n                if (!response.ok) {\r\n                    throw new Error(\"Network response was not ok\");\r\n                }\r\n                return response.json();\r\n            })\r\n            .then((data) => {\r\n                setProducts(data);\r\n                setLoading(false);\r\n            })\r\n            .catch((error) => {\r\n                console.error(\"Error fetching product:\", error);\r\n            });\r\n    }, []);\r\n\r\n    const handleAddToCart = async (product_id) => {\r\n        \r\n        const user_id = Cookies.get('user_id');\r\n\r\n        if (user_id !== undefined) {\r\n        try {\r\n          const response = await axios.post(`${process.env.REACT_APP_API_BASE_URL}/api/user/${user_id}/cartitems/`, {\r\n            quantity: 1,\r\n            product: {id: product_id}   ,\r\n          });\r\n    \r\n          // Обработка успешного добавления в корзину\r\n          console.log('Product added to cart:', response.data);\r\n        } catch (error) {\r\n          // Обработка ошибок\r\n          console.error('Error adding product to cart:', error);\r\n        }\r\n        }\r\n      };\r\n\r\n\r\n\r\n    const myArray = [1, 2, 3, 4];\r\n\r\n    return (\r\n        <div className=\"bg-white\">\r\n            <div className=\"mx-auto max-w-7xl overflow-hidden sm:px-6 lg:px-0\">\r\n                <h2 className=\"sr-only\">Products</h2>\r\n\r\n                {loading ? (\r\n                    <div className=\"-mx-px grid grid-cols-2 sm:mx-0 md:grid-cols-3 lg:grid-cols-4\">\r\n                        {myArray.map(() => (\r\n                            <div\r\n                                className=\"aspect-h-1 m-3 aspect-w-1 overflow-hidden rounded-lg bg-gray-200 group-hover:opacity-90\">\r\n                                <Skeleton className=\"h-80 w-52\"/>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"-mx-px grid grid-cols-2 sm:mx-0 md:grid-cols-3 lg:grid-cols-4\">\r\n                        {products.results.map((product) => (product.is_published ? (\r\n                            <div key={product.id} className=\"group p-1 sm:p-2 fade-in\">\r\n                                <div\r\n                                    className=\"aspect-h-1 aspect-w-1 overflow-hidden rounded-lg bg-gray-200\r\n                                    \">\r\n                                    <Link to={\"/product/\" + product.id}>\r\n                                        <img src={product.image} alt={product.image}\r\n                                                className=\"w-full h-90 object-cover bg-center\"/>\r\n                                    </Link>\r\n                                </div>\r\n                                <div className=\"pb-4 pt-5\">\r\n                                    <h3 className=\"text-base text-gray-900\">\r\n                                        <Link to={\"/product/\" + product.id}>\r\n                                            {product.name}\r\n                                            <span className=\"placeholder col-6\"></span>\r\n                                        </Link>\r\n                                    </h3>\r\n                                    <div className=\"flex items-center mt-2\">\r\n                                        <StarIcon className={'text-yellow-400 h-4 w-4 flex-shrink-0'}\r\n                                                  aria-hidden=\"true\"/>\r\n                                        <p className=\"ml-1 text-sm text-gray-500\">{product.rating} out of 5 stars</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"mt-2\">\r\n                                        <div className=\"flex flex-wrap items-center justify-between\">\r\n                                            <div>\r\n                                                {product.discount_price != 0 ? (\r\n                                                    <>\r\n                                                        <del\r\n                                                            className=\"mt-1 text-sm text-gray-400 \">{formatPrice(product.price)}\r\n                                                            сум\r\n                                                        </del>\r\n                                                        <h4 className=\"text-lg text-lg font-bold text-gray-700 \">\r\n                                                            {formatPrice(product.discount_price)} сум</h4>\r\n                                                    </>\r\n                                                ) : (\r\n                                                    <h4 className=\"text-lg text-lg font-bold text-gray-700 \">\r\n                                                        {formatPrice(product.price)} сум</h4>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"ml-4 flex-shrink-0\">\r\n                                                <button onClick={() => handleAddToCart(product.id)}\r\n                                                        className=\"right-0 bottom-0 w-10 h-10 flex items-center justify-center rounded-full border border-gray-200 text-gray-900 hover:bg-gray-100\">\r\n                                                    <i className=\"fa fa-shopping-cart text-gray-600\"\r\n                                                       aria-hidden=\"true\"></i>\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <div\r\n                                className=\"aspect-h-1 m-2 aspect-w-1 overflow-hidden rounded-lg bg-gray-200 group-hover:opacity-90\">\r\n                                <Skeleton className=\"h-80 w-52\"/>\r\n                            </div>\r\n                        )))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ProductList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}